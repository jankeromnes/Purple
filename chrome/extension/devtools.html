<html>
<head>
<script>
//------------------------------------------------------------------------------
// Save-to-Orion

  chrome.experimental.devtools.inspectedWindow.onResourceContentCommitted.addListener(function saveToOrion(resource) {

    resource.getContent(function onContent(content, encoding) {

      console.log("saveToOrion, getContent "+resource.url, content);

      var request = { message: "saveResource", url: resource.url, content: content, encoding: encoding };
      var responseHandler = function(response) {
        console.log("saveResource response", response);
      };

      chrome.extension.sendRequest(request, responseHandler);

    });

    console.log("saveToOrion, issued getContent "+resource.url);
  });
  
//----------------------------------------------------------------------------
/*
  chrome.experimental.devtools.panels.setOpenResourceHandler(function openInOrion(resource) {
    console.log("openInOrion"+resource.url);
  });
*/  
  console.log("devtools.html loaded");
</script>
</head>
<body><!-- just make-work I guess --></body>
</html>
